# IO

## Wolai 目录

*   [IO步骤](#io步骤)

*   [阻塞、非阻塞、同步、异步](#阻塞非阻塞同步异步)

    *   *   [同步、异步](#同步异步)
        *   [阻塞、非阻塞](#阻塞非阻塞)
    *   [同步阻塞](#同步阻塞)
    *   [同步非阻塞](#同步非阻塞)

*   [IO复用](#io复用)

    *   [select & poll](#select--poll)
    *   [epoll](#epoll)

## IO步骤

*   网络IO

    *   本质是socket文件读取

*   磁盘IO

对于IO的访问，数据会先被拷贝到内核的缓冲区（时间较长），然后再拷贝到应用程序的地址空间（时间较短）

## 阻塞、非阻塞、同步、异步

#### 同步、异步

同步异步关注的是消息通信机制。（调用者主动等待，还是接受通知）

#### 阻塞、非阻塞

关注的是程序等待结果的状态。（进程、线程是否会被挂起）

### 同步阻塞

简单、基本不会占用cpu资源；

每个连接需要单独的进程或线程，内存、内存切换开销大

### 同步非阻塞

只针对网络IO有效。

## IO复用

（同步非阻塞）

### select & poll

1.  注册待侦听的fd（File descriptor）

2.  每次调用都去检查fd状态。当fd就绪的时候返回

3.  返回结果中包含已就绪和未就绪的fd

### epoll

基于事件驱动（callback），不需要在每次调用的时候检查fd。
